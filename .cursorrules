# Cursor IDE Rules for market-data-store

## Project Context
This is a data-store control-plane: FastAPI admin endpoints, Alembic migrations, policies, CLI, metrics.
No bulk data plane here. Orchestrator writes via the datastore library; readers go direct DB or separate analytics API.

## Environment Setup
- Always activate virtual environment: .\.venv\Scripts\Activate.ps1
- Load .env file for environment variables before running scripts
- Use PowerShell syntax for all terminal commands

## Coding Standards
- Python 3.11, FastAPI, Typer, SQLAlchemy 2.x, Alembic
- Line length: 100 characters (enforced by Black/Ruff)
- Use type hints on all functions
- Log with loguru, not print()
- Add Prometheus metrics for operations
- Use pydantic BaseSettings for configuration

## Boundaries
- Do not create business tables without explicit instruction
- Control-plane endpoints: health, readiness, schema/version, migrate, retention/compression, aggregate refresh, backfills, metrics
- Auth: mutating endpoints must support X-Admin-Token

## Guardrails
- No destructive SQL or DDL unless explicitly asked
- Keep modules cohesive, small, and documented with a top docstring
- Inject only assets referenced by the task. Never dump entire files

## Detailed Rules System
- See cursorrules/ folder for detailed task-specific rules
- Use cursorrules/solution_manifest.json for asset lookup
- Reference cursorrules/rules/*.mdc for specific guidance
- Load cursorrules/index.mdc for comprehensive context
